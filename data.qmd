# Data {#data}

This chapter describes the datasets used throughout the book, one possibility is that this could be moved to an appendix and in the online version of the book any mention of the dataset in the main text could be cross-linked to its description. One thing that I really liked in the first edition is the emphasis on analysis
question of interest and the little notes about the data. I believe the original layout was to put the data in order of appearance of the book, which naturally clusters them by technique.

```{r}
#| message: false
#| echo: false
library(gt)
library(gtExtras)
library(gtsummary)
library(readr)
datasets <- read_csv("misc/datasets.csv") %>% select(-`Other Notes`)
datasets %>% gt() %>% cols_width(Name~px(100), 
                                 Description~px(300),
                                 Source~px(150), 
                                 Analysis~px(100))
```


## Australian Football League Women

### Description {.unnumbered}

This is data from the 2021 Women's Australian Football League. These are average player statistics across the season, with game statistics provided by the [fitzRoy](https://jimmyday12.github.io/fitzRoy/) package. If you are new to the game of AFL, there is a nice explanation on [Wikipedia](https://en.wikipedia.org/wiki/Women%27s_Australian_rules_football). 

### Variables {.unnumbered}

```{r}
#| label: load-data-libraries
#| echo: FALSE
#| message: FALSE
#| warning: FALSE
library(mulgar)
library(dplyr)
```

```{r}
#| label: data-aflw
#| echo: FALSE
#| message: FALSE
#| warning: FALSE
data(aflw)
glimpse(aflw)
```

### Purpose {.unnumbered}

The primary analysis is to summarise the variation using principal component analysis, which gives information about relationships between the statistics or skills sets common in players. One also might be tempted to cluster the players, but there are no obvious clusters so it could be frustrating. At best one could partition the players into groups, while recognising there are no absolutely distinct and separated groups.

### Source {.unnumbered}

See the information provided with the [fitzRoy](https://jimmyday12.github.io/fitzRoy/) package.

### Pre-processing {.unnumbered}

The code for downloading and pre-processing the data is available at the [mulgar](https://dicook.github.io/mulgar/) website in the `data-raw` folder. The data provided by the fitzRoy package was pre-processed to reduce the variables to only those that relate to player skills and performance. It is possible that using some transformations on the variables would be useful to make them less skewed. 

## Palmer penguins

```{r}
#| label: penguins
#| message: FALSE
#| eval: FALSE
library(palmerpenguins)
penguins <- penguins %>%
  na.omit() # 11 observations out of 344 removed
# use only vars of interest, and standardise
# them for easier interpretation
penguins_sub <- penguins[,c(1, 3:6)] %>% 
  mutate(across(where(is.numeric),  ~ scale(.)[,1])) %>%
  rename(bl = bill_length_mm,
         bd = bill_depth_mm,
         fl = flipper_length_mm,
         bm = body_mass_g)
save(penguins_sub, file="data/penguins_sub.rda")
```

### Description {.unnumbered}

This data measure four physical characteristics of three species of penguins.  

### Variables {.unnumbered}

|Name      | Description     |
|:---------|:----------------|
|`species` | a factor denoting penguin species (Ad√©lie, Chinstrap and Gentoo) |
|`bl`      | a number denoting bill length (millimeters) |`bd`      | a number denoting bill depth (millimeters) |
|`fl`      | an integer denoting flipper length (millimeters) |
|`bm`      | an integer denoting body mass (grams) |

### Purpose {.unnumbered}

The primary goal is to find a combination of the four variables where the three species are distinct. This is also a useful data set to illustrate cluster analysis.

### Source {.unnumbered}

Details of the penguins data can be found at [https://allisonhorst.github.io/palmerpenguins/](https://allisonhorst.github.io/palmerpenguins/), and @penguins is the package source.

### Pre-processing {.unnumbered}

The data is loaded from the `palmerpenguins` package. The four physical measurement variables and the species are selected, and the penguins with missing values are removed. Variables are standardised, and their names are shortened.


```{r}
#| label: penguins_echo
#| message: FALSE
#| eval: FALSE
#| echo: TRUE
#| code-fold: FALSE
library(palmerpenguins)
penguins <- penguins %>%
  na.omit() # 11 observations out of 344 removed
# use only vars of interest, and standardise
# them for easier interpretation
penguins_sub <- penguins[,c(3:6, 1)] %>% 
  mutate(across(where(is.numeric),  ~ scale(.)[,1])) %>%
  rename(bl = bill_length_mm,
         bd = bill_depth_mm,
         fl = flipper_length_mm,
         bm = body_mass_g) %>%
  as.data.frame()
save(penguins_sub, file="data/penguins_sub.rda")
```

## Notes to self

There were fifteen datasets listed in chapter 7 of the first edition. Several
of these were related to networks which we are not including this time. I have
tried to give a mix of things on a variety of topics. It would be nice to
see if there's updated versions of the "tips" 
(there seems to be a lot of noise in the literature here and no open datasets) and 
Di's music data (perhaps we could scrape our own spotify accounts to get an equivalent), there are also a few audio challenge datasets like [FSD50K](https://zenodo.org/record/4060432#.YCHksxMzbWY) . I think
it would be useful to have more unstructured data sets like natural text that we have used for 1010.


### Other possible sources for data {-}

There are now many search engines available for datasets that originate
from research contexts that list licensing information and DOIs:

* https://zenodo.org (mostly ecology/biology)
* https://datadryad.org/stash (mostly biology)
* https://dataverse.harvard.edu/dataverse/harvard/ (mostly social sciences, but has a mixture of things)
* There's also a big list of datasets here: https://docs.google.com/spreadsheets/d/1ejOJTNTL5ApCuGTUciV0REEEAqvhI2Rd2FCoj7afops/edit#gid=0 (all psychology related)
* TidyTuesday
    * https://github.com/rfordatascience/tidytuesday/blob/master/data/2022/2022-03-29/readme.md Would need to rearrange data to look at count, participation, revenue, expenditure
* gapminder
* accounting records
* Lyn's ecology data
* learningtower, yowie
